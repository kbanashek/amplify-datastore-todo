#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ“¦ Checking yarn integrity..."
yarn check --integrity || {
  echo "âŒ Yarn integrity check failed. Please run 'yarn install' to fix dependency issues."
  echo "ğŸ’¡ This prevents committing with broken dependencies or lockfile mismatches."
  exit 1
}

echo "âœ… Yarn integrity check passed!"

echo "ğŸ” Running lint..."
yarn lint || {
  echo "âŒ Lint failed. Please fix linting errors before committing."
  exit 1
}

echo "âœ… Lint passed!"

echo "ğŸ’… Running format check..."
yarn format:check || {
  echo "âŒ Format check failed. Please run 'yarn format' to fix formatting."
  exit 1
}

echo "âœ… Format check passed!"

echo "ğŸ”„ Checking for circular dependencies..."
yarn check:circular || {
  echo "âŒ Circular dependencies detected. Please fix them before committing."
  echo "ğŸ’¡ Run 'yarn check:circular' to see the circular dependency graph."
  exit 1
}

echo "âœ… No circular dependencies found!"
echo "âœ… All pre-commit checks passed!"



